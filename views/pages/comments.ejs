<!DOCTYPE html>
<html>
    <head>
        <title>Comments</title>
        <%- include('../partials/head') %>
    </head>
    <body>
        <header>
            <%- include('../partials/header') %>
        </header>
        <main>
            <div id="commentInputDiv">
                <form method="POST">
                    <label for="commentText">Comment:</label>
                    <input type="text" id="commentText" name="commentText">
                    <input type="submit" value="Submit">
                </form>
                
            </div>
            <div id="commentViewDiv">
                <ul>
                    <% comments.forEach(function(comment){ %>
                        <li>
                            <h4>
                                <%= comment.commentText %>
                            </h4>
                        </li>
                    <% }); %>    
                    
                </ul>
            </div>
            
        </main>
        <script type="text/javascript" src="/js/manageHeader.js"></script>
        <script>
            var res = "<%- firstName %>";
            var isAdmin = "<%- isAdmin %>";
            manageHeader(res);
            
            // Adds button for admin to delete all comments
            
            if(res == "Not logged in" || res == undefined){
                document.getElementById("commentInputDiv").remove();
            }


            if(isAdmin == "true"){
                var deleteAllButton = document.createElement("a");
                deleteAllButton.innerText = "Delete all Comments";
                deleteAllButton.href = "/deleteComments";

                var commentInputDiv = document.getElementById("commentInputDiv");
                commentInputDiv.appendChild(deleteAllButton);
            }

        </script>
    </body>
</html>