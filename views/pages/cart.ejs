<!DOCTYPE html>
<html>
    <head>
        <title>Cart</title>
    </head>
    <body>
        <header>
            <%- include('../partials/header') %>
        </header>
        <main>
            <ul>
                <% var totalCost = 0; %>
                <% cartItems.forEach(function(item){ %>
                    <li>
                        <h3>
                            <%= item.itemName %>
                        </h3>
                        <h4>
                            <% var cost = item.itemCost * item.quantity%>
                            <% totalCost += cost; %>
                            £<%= item.itemCost %> each x <%= item.quantity %> items : £<%= cost.toFixed(2) %>
                        </h4>
                        <form method="POST" action="/cart">
                            <input type="text" name="itemName" value="<%= item.itemName %>" hidden>
                            <input type="text" name="quantity" value="<%= item.quantity %>" hidden>
                            <input type="submit" value="Remove from Cart">
                        </form>
                        
                    </li>
                <% }); %>
                <li>
                    <h4>
                        Total cost: £<%= totalCost.toFixed(2) %>
                    </h4>
                </li>
            </ul>
        </main>
        <script type="text/javascript" src="/js/manageHeader.js"></script>
        <script>
            var res = "<%- firstName %>";
            manageHeader(res);
        </script>
    </body>
</html>